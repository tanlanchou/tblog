<!DOCTYPE html>
<html>

<head>
    <title>多层嵌套的事件捕获和冒泡示例</title>
</head>
<style>
    #outer {
        width: 350px;
        height: 350px;
        background-color: black;
    }

    #middle {
        width: 300px;
        height: 300px;
        background-color: blue;
    }

    #inner {
        width: 250px;
        height: 250px;
        background-color: yellow;
    }
</style>

<body>
    <div id="outer">
        <div id="middle">
            <div id="inner">
                <button id="btn">点击</button>
            </div>
        </div>
    </div>

    <script>
        // 获取元素
        var outer = document.getElementById('outer');
        var middle = document.getElementById('middle');
        var inner = document.getElementById('inner');
        var btn = document.getElementById('btn');

        // 事件处理程序
        function handleEvent(event) {
            console.log(event.target.id + ' 触发了 ' + event.eventPhase);
        }

        function f(name) {
            return function(event) {
                console.log(`${event.target.id} 触发了, 现在处于的阶段是 ${event.eventPhase}, 在传递到了${name}`);
            }
        }

        // 添加事件处理程序
        // outer.addEventListener('click', f(`outer`), true); // 事件捕获阶段
        // middle.addEventListener('click', f(`middle`), true); // 事件捕获阶段
        // inner.addEventListener('click', f(`inner`), true); // 事件捕获阶段
        // btn.addEventListener('click', f(`btn`), true); // 事件捕获阶段

        outer.addEventListener('click', f(`outer`), {}); // 事件冒泡阶段
        middle.addEventListener('click', f(`middle`), {}); // 事件冒泡阶段
        inner.addEventListener('click', f(`inner`), {}); // 事件冒泡阶段
        btn.addEventListener('click', f(`btn`), {}); // 事件冒泡阶段
    </script>
</body>

</html>