<!DOCTYPE html>
<html lang="zh-Hans">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="fetch ç®€å•ä»‹ç»" />
    <meta name="hexo-theme-A4" content="v1.7.0" />
    <link rel="alternate icon" type="image/webp" href="/tblog/img/favicon.webp">
    <title>æˆå¤©ä¹±å†™ | ä»£ç å’Œç”Ÿæ´»</title>

    
        
            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/highlight/style1.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/a11y-dark.min.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/reset.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/markdown.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/fonts.css">
 
            <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
            

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/ui.css">
 
            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/style.css">

    
            <!--è¿”å›é¡¶éƒ¨css-->
            
                
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/returnToTop.css">

                
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/unicons.css">

            
            
                <!--ç›®å½•-->
                
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/toc.css">

            

        
    

    
        
<link rel="stylesheet" href="/tblog/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/tblog/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/tblog/atom.xml" title="æˆå¤©ä¹±å†™" type="application/atom+xml">
</head>
    
    

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/tblog/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/tblog/">æˆå¤©ä¹±å†™</a> 
            <span class="description">ä¹±å†™ä¸œè¥¿çš„åœ°æ–¹ï¼Œè®²è®²ä»£ç å’Œç”Ÿæ´»</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/tblog/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/tblog/list/">æ–‡ç« </a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    fetch ç®€å•ä»‹ç»
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2024-12-02</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š1.2k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š5åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#01-%E4%BB%80%E4%B9%88%E6%98%AF-fetch"><span class="post-toc-text">01. ä»€ä¹ˆæ˜¯ fetch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#02-Response"><span class="post-toc-text">02. Response</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#03-options"><span class="post-toc-text">03. options</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#04-%E7%BB%88%E6%AD%A2-fetch"><span class="post-toc-text">04. ç»ˆæ­¢ fetch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%80%BB%E7%BB%93%E3%80%82"><span class="post-toc-text">æ€»ç»“ã€‚</span></a></li></ol>
            
        
        <h3 id="01-ä»€ä¹ˆæ˜¯-fetch"><a href="#01-ä»€ä¹ˆæ˜¯-fetch" class="headerlink" title="01. ä»€ä¹ˆæ˜¯ fetch"></a>01. ä»€ä¹ˆæ˜¯ fetch</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/fetch">https://developer.mozilla.org/zh-CN/docs/Web/API/fetch</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2020/12/fetch-tutorial.html">https://www.ruanyifeng.com/blog/2020/12/fetch-tutorial.html</a></p>
<blockquote>
<p>fetch()æ˜¯ XMLHttpRequest çš„å‡çº§ç‰ˆï¼Œç”¨äºåœ¨ JavaScript è„šæœ¬é‡Œé¢å‘å‡º HTTP è¯·æ±‚ã€‚æµè§ˆå™¨åŸç”Ÿæä¾›è¿™ä¸ªå¯¹è±¡</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://caniuse.com/?search=fetch">https://caniuse.com/?search=fetch</a> ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ.</p>
<blockquote>
<p>ï¼ˆ1ï¼‰fetch()ä½¿ç”¨ Promiseï¼Œä¸ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå› æ­¤å¤§å¤§ç®€åŒ–äº†å†™æ³•ï¼Œå†™èµ·æ¥æ›´ç®€æ´ã€‚</p>
<p>ï¼ˆ2ï¼‰fetch()é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼ŒAPI åˆ†æ•£åœ¨å¤šä¸ªå¯¹è±¡ä¸Šï¼ˆResponse å¯¹è±¡ã€Request å¯¹è±¡ã€Headers å¯¹è±¡ï¼‰ï¼Œæ›´åˆç†ä¸€äº›ï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼ŒXMLHttpRequest çš„ API è®¾è®¡å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œè¾“å…¥ã€è¾“å‡ºã€çŠ¶æ€éƒ½åœ¨åŒä¸€ä¸ªæ¥å£ç®¡ç†ï¼Œå®¹æ˜“å†™å‡ºéå¸¸æ··ä¹±çš„ä»£ç ã€‚</p>
<p>ï¼ˆ3ï¼‰fetch()é€šè¿‡æ•°æ®æµï¼ˆStream å¯¹è±¡ï¼‰å¤„ç†æ•°æ®ï¼Œå¯ä»¥åˆ†å—è¯»å–ï¼Œæœ‰åˆ©äºæé«˜ç½‘ç«™æ€§èƒ½è¡¨ç°ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œå¯¹äºè¯·æ±‚å¤§æ–‡ä»¶æˆ–è€…ç½‘é€Ÿæ…¢çš„åœºæ™¯ç›¸å½“æœ‰ç”¨ã€‚XMLHTTPRequest å¯¹è±¡ä¸æ”¯æŒæ•°æ®æµï¼Œæ‰€æœ‰çš„æ•°æ®å¿…é¡»æ”¾åœ¨ç¼“å­˜é‡Œï¼Œä¸æ”¯æŒåˆ†å—è¯»å–ï¼Œå¿…é¡»ç­‰å¾…å…¨éƒ¨æ‹¿åˆ°åï¼Œå†ä¸€æ¬¡æ€§åå‡ºæ¥</p>
</blockquote>
<p>åŸç”Ÿæ”¯æŒ promise.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="title function_">fetch</span>(myUrl)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">blob</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">blob</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/image/</span>.<span class="title function_">test</span>(blob.<span class="property">type</span>)) <span class="keyword">return</span> <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</span><br><span class="line">        target.<span class="property">blob</span> = url;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        target.<span class="title function_">showError</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">active</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;URLä¸æ­£ç¡®æˆ–MIMEç±»å‹ä¸æ­£ç¡®&quot;</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯æˆ‘ä¹‹å‰è·å–å›¾ç‰‡çš„ä¸€ä¸ªä¾‹å­ï¼Œæ˜¯é€šè¿‡ resè·å–äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¾‹å­ã€‚</p>
<p>ç†è®ºä¸Šåˆ°è¿™é‡Œå°±å¯ä»¥å¼€å§‹åŸºæœ¬çš„ä½¿ç”¨äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯å¤§æ¦‚çš„çŸ¥é“æœ‰ä»€ä¹ˆå±æ€§ï¼Œapiï¼Œç”¨çš„æ—¶å€™æŸ¥ã€‚</p>
<h3 id="02-Response"><a href="#02-Response" class="headerlink" title="02. Response"></a>02. Response</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Response">https://developer.mozilla.org/zh-CN/docs/Web/API/Response</a></p>
<p><strong>æ•°æ®ç±»å‹</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Response</span>.<span class="title function_">arrayBuffer</span>()  <span class="comment">//äºŒè¿›åˆ¶ æµåª’ä½“</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="title function_">blob</span>()  <span class="comment">//äºŒè¿›åˆ¶ blobï¼Œå›¾ç‰‡ä¹‹ç±»</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="title function_">formData</span>() <span class="comment">//è¡¨å•</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="title function_">json</span>()</span><br><span class="line"><span class="title class_">Response</span>.<span class="title function_">text</span>()</span><br><span class="line"><span class="title class_">Response</span>.<span class="title function_">clone</span>()</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = <span class="title class_">Response</span>.<span class="title function_">text</span>()</span><br><span class="line"><span class="keyword">let</span> result = <span class="title class_">Response</span>.<span class="title function_">json</span>() <span class="comment">//error</span></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥éœ€è¦å…ˆ <code>clone()</code></p>
<p><strong>çŠ¶æ€ç å’ŒåŸºæœ¬å±æ€§</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Response</span>.<span class="property">ok</span> <span class="number">200</span> &lt; <span class="title class_">Response</span>.<span class="property">status</span> &lt; <span class="number">299</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="property">status</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="property">statusText</span> <span class="comment">//å­—ç¬¦ä¸²ï¼Œok</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="property">type</span> <span class="comment">//è¯·æ±‚ç±»å‹</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="property">url</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="property">redirected</span> <span class="comment">//è¯·æ±‚æ˜¯å¦å‘ç”Ÿè¿‡è·³è½¬</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="title function_">redirect</span>() <span class="comment">//è·³è½¬</span></span><br></pre></td></tr></table></figure>

<p><strong>body</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Response</span>.<span class="property">body</span> <span class="comment">//ReadableStream</span></span><br><span class="line"><span class="title class_">Response</span>.<span class="property">bodyUsed</span> <span class="comment">//bodyUsed æ˜¯ Response mixin ä¸­çš„ä¸€ä¸ªåªè¯»å±æ€§ã€‚ç”¨ä»¥è¡¨ç¤ºè¯¥ body æ˜¯å¦è¢«ä½¿ç”¨è¿‡ã€‚</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream">https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/data&#x27;</span>) <span class="comment">// å‘èµ·ç½‘ç»œè¯·æ±‚</span></span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> reader = response.<span class="property">body</span>.<span class="title function_">getReader</span>(); <span class="comment">// è·å– ReadableStreamDefaultReader å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">readStream</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> reader.<span class="title function_">read</span>() <span class="comment">// é€å—è¯»å–æ•°æ®</span></span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; done, value &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (done) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ•°æ®è¯»å–å®Œæ¯•&#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å¤„ç†è¯»å–çš„æ•°æ®</span></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯»å–æ•°æ®å—:&#x27;</span>, value);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// ç»§ç»­è¯»å–ä¸‹ä¸€ä¸ªæ•°æ®å—</span></span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">readStream</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è¯»å–æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯:&#x27;</span>, error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">readStream</span>(); <span class="comment">// å¼€å§‹è¯»å–æ•°æ®æµ</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è¯·æ±‚æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p><strong>Response.headers</strong></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Headers">https://developer.mozilla.org/zh-CN/docs/Web/API/Headers</a></p>
<p>ä»¥ä¸Šå°±æ˜¯ response å¤§æ¦‚å‚æ•°ï¼Œé‡ç‚¹å…¶å®æ˜¯ç±»å‹è·å–å’Œbody</p>
<h3 id="03-options"><a href="#03-options" class="headerlink" title="03. options"></a>03. options</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/fetch">https://developer.mozilla.org/zh-CN/docs/Web/API/fetch</a></p>
<ul>
<li>method: è¯·æ±‚ä½¿ç”¨çš„æ–¹æ³•ï¼Œå¦‚ GETã€POSTã€‚</li>
<li>headers: è¯·æ±‚çš„å¤´ä¿¡æ¯ï¼Œå½¢å¼ä¸º Headers çš„å¯¹è±¡æˆ–åŒ…å« ByteString å€¼çš„å¯¹è±¡å­—é¢é‡ã€‚</li>
<li>body: è¯·æ±‚çš„ body ä¿¡æ¯ï¼šå¯èƒ½æ˜¯ä¸€ä¸ª Blobã€BufferSourceã€FormDataã€URLSearchParams æˆ–è€… USVString å¯¹è±¡ã€‚æ³¨æ„ GET æˆ– HEAD æ–¹æ³•çš„è¯·æ±‚ä¸èƒ½åŒ…å« body ä¿¡æ¯ã€‚</li>
<li>mode: è¯·æ±‚çš„æ¨¡å¼ï¼Œå¦‚ corsã€no-cors æˆ–è€… same-originã€‚</li>
<li>credentials: è¯·æ±‚çš„ credentialsï¼Œå¦‚ omitã€same-origin æˆ–è€… includeã€‚ä¸ºäº†åœ¨å½“å‰åŸŸåå†…è‡ªåŠ¨å‘é€ cookieï¼Œå¿…é¡»æä¾›è¿™ä¸ªé€‰é¡¹ï¼Œä» Chrome 50 å¼€å§‹ï¼Œè¿™ä¸ªå±æ€§ä¹Ÿå¯ä»¥æ¥å— FederatedCredential (en-US) å®ä¾‹æˆ–æ˜¯ä¸€ä¸ª PasswordCredential (en-US) å®ä¾‹ã€‚</li>
<li>cache: è¯·æ±‚çš„ cache æ¨¡å¼ï¼šdefaultã€ no-storeã€ reload ã€ no-cacheã€ force-cache æˆ–è€… only-if-cachedã€‚</li>
<li>redirect: å¯ç”¨çš„ redirect æ¨¡å¼ï¼šfollow (è‡ªåŠ¨é‡å®šå‘), error (å¦‚æœäº§ç”Ÿé‡å®šå‘å°†è‡ªåŠ¨ç»ˆæ­¢å¹¶ä¸”æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼‰ï¼Œæˆ–è€… manual (æ‰‹åŠ¨å¤„ç†é‡å®šå‘)ã€‚åœ¨ Chrome ä¸­é»˜è®¤ä½¿ç”¨ followï¼ˆChrome 47 ä¹‹å‰çš„é»˜è®¤å€¼æ˜¯ manualï¼‰ã€‚</li>
<li>referrer: ä¸€ä¸ª USVString å¯ä»¥æ˜¯ no-referrerã€client æˆ–ä¸€ä¸ª URLã€‚é»˜è®¤æ˜¯ clientã€‚</li>
<li>referrerPolicy: æŒ‡å®šäº† HTTP å¤´éƒ¨ referer å­—æ®µçš„å€¼ã€‚å¯èƒ½ä¸ºä»¥ä¸‹å€¼ä¹‹ä¸€ï¼šno-referrerã€ no-referrer-when-downgradeã€originã€origin-when-cross-originã€ unsafe-urlã€‚</li>
<li>integrity: åŒ…æ‹¬è¯·æ±‚çš„ subresource integrity å€¼ï¼ˆä¾‹å¦‚ï¼š sha256-BpfBw7ivV8q2jLiT13fxDYAe2tJllusRSZ273h2nFSE&#x3D;ï¼‰ã€‚</li>
<li>signal: AbortController</li>
<li>keepalive</li>
</ul>
<h3 id="04-ç»ˆæ­¢-fetch"><a href="#04-ç»ˆæ­¢-fetch" class="headerlink" title="04. ç»ˆæ­¢ fetch"></a>04. ç»ˆæ­¢ fetch</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/AbortController">https://developer.mozilla.org/zh-CN/docs/Web/API/AbortController</a></p>
<p>ä»–ä¸ä»…ä»…å¯ä»¥ç»ˆæ­¢ fetchï¼Œè¿˜å¯ä»¥ç»ˆæ­¢ xmlHttpRequest.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line"><span class="keyword">let</span> signal = controller.<span class="property">signal</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">  <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">signal.<span class="title function_">addEventListener</span>(<span class="string">&#x27;abort&#x27;</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;abort!&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">controller.<span class="title function_">abort</span>(); <span class="comment">// å–æ¶ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(signal.<span class="property">aborted</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong>fetch</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> controller.<span class="title function_">abort</span>(), <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/long-operation&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">name</span> == <span class="string">&#x27;AbortError&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Aborted!&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“ã€‚"><a href="#æ€»ç»“ã€‚" class="headerlink" title="æ€»ç»“ã€‚"></a>æ€»ç»“ã€‚</h3><p>å…¶å®å·®ä¸å¤šï¼Œä¸»è¦è¯­æ³•å’Œç”¨æ³•ä¸Šçš„å·®åˆ«ã€‚fetchåŸç”Ÿ åŸç”ŸPromise é“¾å¼è¯­æ³•ï¼Œå…¶ä»–æ›´å¤§åŒºåˆ«ï¼Œåœ¨äºæµå¼æ•°æ®å¤„ç†ï¼Œresponse.body</p>

    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-07-07</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« tommy</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tblog/tags/web/'>
                            web
                        </a>
                    
                        <a href='/tblog/tags/javascript/'>
                            javascript
                        </a>
                    
                        <a href='/tblog/tags/fetch/'>
                            fetch
                        </a>
                    
                </span>
             
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/tblog/2023/07/08/Vue3_queue/'>vue3 ä»»åŠ¡è°ƒåº¦æºç è§£æ</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/tblog/2023/07/06/web_img_lazy_loading/">å›¾ç‰‡æ‡’åŠ è½½æ–¹æ¡ˆ</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 1949-2023 China 

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
        
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlight.min.js"></script>

        
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlightjs-line-numbers.js"></script>


        
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/randomHeaderContent.js"></script>

        <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
        
            
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

            
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/returnToTop.js"></script>

        
        
        <!--ç›®å½•-->
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
            
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/toc.js"></script>

        
    




<script src="/tblog/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/tblog/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/tblog/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/tblog/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/tblog/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/tblog/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/tblog/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>