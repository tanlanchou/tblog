# CIA402 PDO

这个一直仔细看



### 01. PDO 的基本知识



> PDO 是什么: PDO（Process Data Object，过程数据对象）是 CANopen/CiA‑402 用于实时传输小量数据（最多 8 字节）的报文，几乎无协议开销，适合周期/事件驱动的控制与反馈。与之相对，SDO 用于配置与参数下载，非实时。



**PDO** 简单说就是 **SDO** 的映射



|  对象 | 比喻     | 用途                                           |
| ----------------- | ------ | -------------------------------------------- |
| SDO               | 客户服务柜台 | 配置参数，读写对象字典，准确但慢                             |
| PDO               | 大喇叭广播  | 实时数据，传输位置/速度，快但无确认                           |
| NMT               | 系统管理员  | 控制网络，启动/停止/复位设备                              |
| SYNC              | 节拍器    | 同步动作，让所有设备步调一致                               |
| EMCY              | 急救警报   | 报告故障，设备主动上报严重错误                |

实时数据用 PDO. 需要快速交换的



PDO 分为 RPDO和TPDO 通道与索引区间

* RPDO（主站发给驱动）：通信参数在 0x1400..0x1403，映射在 0x1600..0x1603

* TPDO（驱动发给主站）：通信参数在 0x1800..0x1803，映射在 0x1A00..0x1A03
  
  

### 02. PDO 有几路？



> NrOfRXPDO=4
> 
> NrOfTXPDO=4



这是是 **YIyou** 的, 支持4路，一般也是支持4路，本质上 PDO 几路功能都一样。只是优先级不一样导致的使用方式不一样



* 工程惯例（为了优先级/实时性分工，非必须）：
  
  - RPDO1（最高优先级）：0x6040 控制字（可加 0x6060 模式）
  
  - RPDO2（主设定量）：0x607A/60FF/6071 等（同步=1 常见）
  
  - RPDO3（偏置/辅助）：0x60B2/60B1/60B0、轮廓参数微调
  
  - RPDO4（低频/自定义）：回零参数、限位等（很多场景用 SDO 更合适）
    
    

映射项格式（32b）：

> Index(16b) | Sub(8b) | Length_in_bits(8b)，总长度 ≤ 8 字节，按映射顺序小端打包。



| PDO 编号    | Communication Parameter Index | Mapping Parameter Index |
| --------- | ----------------------------- | ----------------------- |
| **RPDO1** | 0x1400                        | **0x1600**              |
| **RPDO2** | 0x1401                        | **0x1601**              |
| **RPDO3** | 0x1402                        | **0x1602**              |
| **RPDO4** | 0x1403                        | **0x1603**              |
